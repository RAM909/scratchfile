<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scratch Card - Happy Teddy Day</title>
<style>
    body{
        margin:0;
        height:100vh;
        display:flex;
        justify-content:center;
        align-items:center;
        background:linear-gradient(135deg,#ff9a9e,#fad0c4);
        font-family:Arial, sans-serif;
        overflow:hidden;
    }

    .container{
        position:relative;
        width:350px;
        height:220px;
        border-radius:20px;
        overflow:hidden;
        box-shadow:0 10px 25px rgba(0,0,0,0.3);
        background:white;
    }

    .message{
        position:absolute;
        width:100%;
        height:100%;
        display:flex;
        justify-content:center;
        align-items:center;
        font-size:32px;
        font-weight:bold;
        color:#ff4081;
        z-index:1;
    }

    canvas{
        position:absolute;
        top:0;
        left:0;
        z-index:2;
        cursor:pointer;
    }

    .giftScreen{
        display:none;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        height:100vh;
        text-align:center;
        background:linear-gradient(135deg,#ff758c,#ff7eb3);
        color:white;
        animation:fadeIn 1s ease-in;
    }

    .teddy{
        font-size:120px;
        animation:bounce 1.5s infinite;
    }

    @keyframes bounce{
        0%,100%{ transform:translateY(0);}
        50%{ transform:translateY(-20px);}
    }

    @keyframes fadeIn{
        from{opacity:0;}
        to{opacity:1;}
    }
</style>
</head>
<body>

<div class="container" id="scratchCard">
    <div class="message">üéâ You Won! üéâ</div>
    <canvas id="scratchCanvas"></canvas>
</div>

<div class="giftScreen" id="giftScreen">
    <div class="teddy">üß∏</div>
    <h1>Here is your gift ‚ù§Ô∏è</h1>
    <h2>Happy Teddy Day!</h2>
</div>

<script>
const canvas = document.getElementById("scratchCanvas");
const container = document.querySelector(".container");
const ctx = canvas.getContext("2d");

canvas.width = container.offsetWidth;
canvas.height = container.offsetHeight;

// Scratch layer
ctx.fillStyle = "#C0C0C0";
ctx.fillRect(0,0,canvas.width,canvas.height);

// Add text on scratch layer
ctx.fillStyle = "#888";
ctx.font = "20px Arial";
ctx.fillText("Scratch Here!", 100, 110);

let isDrawing = false;

function scratch(x,y){
    ctx.globalCompositeOperation = "destination-out";
    ctx.beginPath();
    ctx.arc(x,y,20,0,Math.PI*2);
    ctx.fill();
}

canvas.addEventListener("mousedown",()=> isDrawing = true);
canvas.addEventListener("mouseup",()=> {
    isDrawing = false;
    checkScratch();
});
canvas.addEventListener("mousemove",(e)=>{
    if(!isDrawing) return;
    const rect = canvas.getBoundingClientRect();
    scratch(e.clientX - rect.left, e.clientY - rect.top);
});

// Mobile support
canvas.addEventListener("touchstart",()=> isDrawing = true);
canvas.addEventListener("touchend",()=> {
    isDrawing = false;
    checkScratch();
});
canvas.addEventListener("touchmove",(e)=>{
    if(!isDrawing) return;
    const rect = canvas.getBoundingClientRect();
    const touch = e.touches[0];
    scratch(touch.clientX - rect.left, touch.clientY - rect.top);
});

function checkScratch(){
    const pixels = ctx.getImageData(0,0,canvas.width,canvas.height).data;
    let transparent = 0;

    for(let i=3;i<pixels.length;i+=4){
        if(pixels[i] === 0) transparent++;
    }

    const percent = (transparent / (pixels.length/4)) * 100;

    if(percent > 40){
        setTimeout(()=>{
            document.getElementById("scratchCard").style.display="none";
            document.getElementById("giftScreen").style.display="flex";
        },500);
    }
}
</script>

</body>
</html>
